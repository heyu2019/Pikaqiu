{"version":3,"sources":["src/js/index.js"],"names":["SONGLRC","generateAudio","initAudioEvent","audio","document","getElementById","onclick","addEventListener","updateProgress","audioEnded","avatar_wrapper","getElementsByClassName","paused","play","className","i","length","style","animationPlayState","pause","onmousedown","e","currentTime","pgsWidth","clientWidth","rate","offsetX","duration","getTotalTime","dragProgressDotEvent","dot","position","oriOffestLeft","oriX","maxLeft","maxRight","flag","down","move","end","event","offsetLeft","touches","clientX","offsetWidth","preventDefault","returnValue","stopPropagation","window","cancelBubble","value","width","left","innerText","transTime","setLrc","time","h","parseInt","m","s","formatTime","split","load","oncanplay","html","musicplayer","innerHTML","songSrc","getAttribute","songAuthor","songTitle","songAvatar","songLrc","getFormatLrc","setAttribute","realplayer","realplayerwidth","realplayerheight","clientHeight","playbg","height","background","backgroundSize","backgroundPosition","strlen","lrc","reg","lrcwords","lrctime","match","unshift","result","map","item","index","index_m","indexOf","index_s","result_key","slice","parseFloat","replace","realtime","str","len","c","charCodeAt"],"mappings":"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","file":"js.d818e0ef.js","sourceRoot":"..","sourcesContent":["var SONGLRC = \"\";  // 歌词\r\n\r\ngenerateAudio();  // 将代码挂载到DOM上\r\ninitAudioEvent();  //初始化音频控制事件\r\n\r\nfunction initAudioEvent() {\r\n    var audio = document.getElementById('music-real-audio');\r\n\r\n    // 点击播放/暂停图片时，控制音乐的播放与暂停\r\n    document.getElementById('audioPlayer').onclick = function () {\r\n        // 监听音频播放时间并更新进度条\r\n        audio.addEventListener('timeupdate', function () {\r\n            updateProgress(audio);\r\n        }, false);\r\n\r\n        // 监听播放完成事件\r\n        audio.addEventListener('ended', function () {\r\n            audioEnded();\r\n        }, false);\r\n\r\n        // 改变播放/暂停图片\r\n        let avatar_wrapper = document.getElementsByClassName('avatar-wrapper');\r\n        if (audio.paused) {\r\n            // 开始播放当前点击的音频\r\n            audio.play();\r\n            document.getElementById(\"audioPlayer\").className = \"iconfont icon-pause avatar\";\r\n\r\n            for (var i = 0; i < avatar_wrapper.length; i++) {\r\n                avatar_wrapper[i].style.animationPlayState = \"running\";\r\n            }\r\n            document.getElementById(\"audioPlayer\").style.animationPlayState = \"running\";\r\n        } else {\r\n            audio.pause();\r\n\r\n            document.getElementById(\"audioPlayer\").className = \"iconfont icon-play avatar\";\r\n\r\n            for (var i = 0; i < avatar_wrapper.length; i++) {\r\n                avatar_wrapper[i].style.animationPlayState = \"paused\";\r\n            }\r\n            document.getElementById(\"audioPlayer\").style.animationPlayState = \"paused\";\r\n        }\r\n    };\r\n\r\n    // 点击进度条跳到指定点播放\r\n    document.getElementById('progressBarBg').onmousedown = function (e) {\r\n        // 只有音乐开始播放后才可以调节，已经播放过但暂停了的也可以\r\n        if (!audio.paused || audio.currentTime != 0) {\r\n            var pgsWidth = document.getElementsByClassName('progress-bar-bg')[0].clientWidth;\r\n            var rate = e.offsetX / pgsWidth;\r\n            audio.currentTime = audio.duration * rate;\r\n            updateProgress(audio);\r\n        }\r\n    };\r\n\r\n    getTotalTime(audio)\r\n    dragProgressDotEvent(audio);\r\n}\r\n\r\n/**\r\n * 鼠标拖动进度点时可以调节进度\r\n * @param {*} audio \r\n */\r\nfunction dragProgressDotEvent(audio) {\r\n    var dot = document.getElementById('progressDot');\r\n\r\n    var position = {\r\n        oriOffestLeft: 0, // 移动开始时进度条的点距离进度条的偏移值\r\n        oriX: 0, // 移动开始时的x坐标\r\n        maxLeft: 0, // 向左最大可拖动距离\r\n        maxRight: 0 // 向右最大可拖动距离\r\n    };\r\n    var flag = false; // 标记是否拖动开始\r\n\r\n    // 鼠标按下时\r\n    dot.addEventListener('mousedown', down, false);\r\n    dot.addEventListener('touchstart', down, false);\r\n\r\n    // 开始拖动\r\n    document.addEventListener('mousemove', move, false);\r\n    document.addEventListener('touchmove', move, false);\r\n\r\n    // 拖动结束\r\n    document.addEventListener('mouseup', end, false);\r\n    document.addEventListener('touchend', end, false);\r\n\r\n    function down(event) {\r\n        if (!audio.paused || audio.currentTime != 0) { // 只有音乐开始播放后才可以调节，已经播放过但暂停了的也可以\r\n            flag = true;\r\n\r\n            position.oriOffestLeft = dot.offsetLeft;\r\n            position.oriX = event.touches ? event.touches[0].clientX : event.clientX; // 要同时适配mousedown和touchstart事件\r\n            position.maxLeft = position.oriOffestLeft; // 向左最大可拖动距离\r\n            position.maxRight = document.getElementById('progressBarBg').offsetWidth - position.oriOffestLeft; // 向右最大可拖动距离\r\n\r\n            // 禁止默认事件（避免鼠标拖拽进度点的时候选中文字）\r\n            if (event && event.preventDefault) {\r\n                event.preventDefault();\r\n            } else {\r\n                event.returnValue = false;\r\n            }\r\n\r\n            // 禁止事件冒泡\r\n            if (event && event.stopPropagation) {\r\n                event.stopPropagation();\r\n            } else {\r\n                window.event.cancelBubble = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    function move(event) {\r\n        if (flag) {\r\n            var clientX = event.touches ? event.touches[0].clientX : event.clientX; // 要同时适配mousemove和touchmove事件\r\n            var length = clientX - position.oriX;\r\n            if (length > position.maxRight) {\r\n                length = position.maxRight;\r\n            } else if (length < -position.maxLeft) {\r\n                length = -position.maxLeft;\r\n            }\r\n\r\n            var pgsWidth = document.getElementsByClassName('progress-bar-bg')[0].clientWidth;\r\n            var rate = (position.oriOffestLeft + length) / pgsWidth;\r\n            audio.currentTime = audio.duration * rate;\r\n            updateProgress(audio);\r\n        }\r\n    }\r\n\r\n    function end() {\r\n        flag = false;\r\n    }\r\n}\r\n\r\n/**\r\n * 更新进度条与当前播放时间\r\n * @param {object} audio - audio对象\r\n */\r\nfunction updateProgress(audio) {\r\n    var value = audio.currentTime / audio.duration;\r\n    document.getElementById(\"progressBar\").style.width = 'width', value * 100 + '%';\r\n    document.getElementById(\"progressDot\").style.left = value * 100 + '%';\r\n    document.getElementById('audioCurTime').innerText = transTime(audio.currentTime);\r\n\r\n    setLrc(audio);\r\n}\r\n\r\n/**\r\n * 播放完成时把进度调回开始的位置\r\n */\r\nfunction audioEnded() {\r\n    document.getElementById(\"progressBar\").style.width = '0';\r\n    document.getElementById(\"progressDot\").style.left = '0';\r\n    document.getElementById('audioCurTime').innerText = transTime(0);\r\n    document.getElementById(\"audioPlayer\").className = \"iconfont icon-play avatar\";\r\n}\r\n\r\n/**\r\n * 音频播放时间换算\r\n * @param {number} value - 音频当前播放时间，单位秒\r\n */\r\nfunction transTime(value) {\r\n    var time = \"\";\r\n    var h = parseInt(value / 3600);\r\n    value %= 3600;\r\n    var m = parseInt(value / 60);\r\n    var s = parseInt(value % 60);\r\n    if (h > 0) {\r\n        time = formatTime(h + \":\" + m + \":\" + s);\r\n    } else {\r\n        time = formatTime(m + \":\" + s);\r\n    }\r\n\r\n    return time;\r\n}\r\n\r\n/**\r\n * 格式化时间显示，补零对齐\r\n * eg：2:4  -->  02:04\r\n * @param {string} value - 形如 h:m:s 的字符串 \r\n */\r\nfunction formatTime(value) {\r\n    var time = \"\";\r\n    var s = value.split(':');\r\n    var i = 0;\r\n    for (; i < s.length - 1; i++) {\r\n        time += s[i].length == 1 ? (\"0\" + s[i]) : s[i];\r\n        time += \":\";\r\n    }\r\n    time += s[i].length == 1 ? (\"0\" + s[i]) : s[i];\r\n\r\n    return time;\r\n}\r\n\r\n\r\n/**\r\n * 获取音频总时间\r\n */\r\nfunction getTotalTime(audio) {\r\n    if (audio === null) {\r\n        document.getElementById('audioTotalTime').innerText = transTime(0);\r\n    } else {\r\n        audio.load();\r\n        audio.oncanplay = function () {\r\n            document.getElementById('audioTotalTime').innerText = transTime(audio.duration);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * 将代码挂载到DOM上\r\n */\r\nfunction generateAudio() {\r\n    let html = `\r\n    <div id=\"music-wrapper\">\r\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/html5-musicplayer/index.css\">\r\n        <div id=\"music-avatar\">\r\n            <div id=\"avatar-bgimg\"></div>\r\n            <div class=\"avatar-wrapper\">\r\n                <img class=\"avatar\" id=\"song-avatar\" src=\"\" alt=\"avatar\" class=\"avatar\">\r\n            </div>\r\n            <div class=\"avatar-wrapper\">\r\n                <span class=\"iconfont icon-play avatar\" id=\"audioPlayer\" ></span>\r\n            </div>\r\n        </div>\r\n\r\n        <div id=\"music-info-wrapper\">\r\n            <div id=\"music-info\">\r\n                <div id=\"music-baseinfo\">\r\n                    <span id=\"music-title\"></span>\r\n                    <span id=\"music-author\"></span>\r\n                </div>\r\n                <div id=\"music-lrc\">\r\n                </div>\r\n            </div>\r\n            <!-- <div id=\"music-author\"></div> -->\r\n\r\n            <div id=\"music-controller\">\r\n                <audio id=\"music-real-audio\" src=\"\">Your browser does not support it!</audio>\r\n                <div class=\"progress-bar-bg\" id=\"progressBarBg\">\r\n                    <span id=\"progressDot\"></span>\r\n                    <div class=\"progress-bar\" id=\"progressBar\"></div>\r\n                </div>\r\n                <div class=\"audio-time\">\r\n                    <span class=\"audio-length-current\" id=\"audioCurTime\">00:00</span>\r\n                    <span class=\"audio-length-total\" id=\"audioTotalTime\">00:00</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div id=\"music-wrapper-bg\"></div>\r\n    <iframe hidden=\"true\" id=\"for-getsonglrc\" name=\"for-getsonglrc\" src=\"\"></iframe>\r\n    `\r\n\r\n    let musicplayer = document.getElementById('html5-musicplayer');\r\n    musicplayer.innerHTML = html; //将代码挂载到DOM上\r\n\r\n    let songSrc = musicplayer.getAttribute('song-src');\r\n    let songAuthor = musicplayer.getAttribute('song-author');\r\n    let songTitle = musicplayer.getAttribute('song-title');\r\n    let songAvatar = musicplayer.getAttribute('song-avatar');\r\n    let songLrc = musicplayer.getAttribute('song-lrc');\r\n\r\n    SONGLRC = getFormatLrc(songLrc); //get song lrc\r\n\r\n    document.getElementsByClassName('avatar')[0].setAttribute(\"src\", songAvatar);\r\n    document.getElementById('music-real-audio').setAttribute(\"src\", songSrc);\r\n    document.getElementById('music-title').innerText = songTitle;\r\n    document.getElementById('music-author').innerText = songAuthor;\r\n\r\n    let realplayer = document.getElementById('music-wrapper');\r\n    let realplayerwidth = realplayer.clientWidth > 500 ? 510 : realplayer.clientWidth * 0.9 + 10;\r\n    let realplayerheight = realplayer.clientHeight + 20;\r\n\r\n    let playbg = document.getElementById('music-wrapper-bg');\r\n    playbg.style.width = realplayerwidth + 'px';\r\n    // playbg.style.height = realplayerheight + 'px';\r\n    playbg.style.height = 100 + 'px';\r\n    playbg.style.background = 'url(' + songAvatar + ') no-repeat center';\r\n    playbg.style.backgroundSize = 'cover';\r\n    playbg.style.backgroundPosition = 'center center';\r\n\r\n    document.getElementById(\"music-info-wrapper\").style.width = realplayerwidth - 120 + 'px'\r\n    document.getElementById(\"progressBarBg\").style.width = realplayerwidth - 120 + 'px'\r\n\r\n    if (strlen(songTitle) > 14) {\r\n        document.getElementById('music-title').style.animationPlayState = \"running\";\r\n    }\r\n\r\n    if (strlen(songAuthor) > 14) {\r\n        document.getElementById('music-author').style.animationPlayState = \"running\";\r\n    }\r\n}\r\n\r\n\r\nfunction getFormatLrc(lrc) {\r\n    let reg = /\\[\\d+:\\d+.\\d+\\]/g;\r\n    let i = 0;\r\n    let lrcwords = lrc.split(reg);\r\n    let lrctime = lrc.match(reg);\r\n    lrctime.unshift('[00:00.000]');\r\n    let result = {};\r\n    lrcwords.map((item, index) => {\r\n        let index_m = lrctime[index].indexOf(':');\r\n        let index_s = lrctime[index].indexOf('.');\r\n\r\n        let result_key = parseInt(lrctime[index].slice(1, index_m)) * 60 + parseInt(lrctime[index].slice(index_m + 1, index_s)) + parseFloat(lrctime[index].slice(index_s + 1, lrctime[index].length - 1) / 1000) + '';\r\n        item = item.replace('\\\\n', '');\r\n        result[result_key] = item !== '' ? item : '······';\r\n    })\r\n    return result;\r\n}\r\n\r\nfunction setLrc(audio) {\r\n    let currentTime = audio.currentTime;\r\n    let realtime = '0';\r\n    let i;\r\n    for (i in SONGLRC) {\r\n        if (parseFloat(i) < parseFloat(currentTime)) {\r\n            if (parseFloat(realtime) < parseFloat(i))\r\n                realtime = i;\r\n        }\r\n    }\r\n    document.getElementById('music-lrc').innerText = SONGLRC[realtime];\r\n}\r\n\r\nfunction strlen(str) {\r\n    var len = 0;\r\n    for (var i = 0; i < str.length; i++) {\r\n        var c = str.charCodeAt(i);\r\n        //单字节加1 \r\n        if ((c >= 0x0001 && c <= 0x007e) || (0xff60 <= c && c <= 0xff9f)) {\r\n            len++;\r\n        } else {\r\n            len += 2;\r\n        }\r\n    }\r\n    return len;\r\n}"]}